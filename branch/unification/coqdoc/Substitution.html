<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Substitution</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">File Substitution</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ssreflect</span> <span class="id" title="var">ssrfun</span> <span class="id" title="var">ssrbool</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">base</span> <span class="id" title="var">tactics</span> <span class="id" title="var">sets</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">MatchingLogic.Utils.extralibrary</span>. <span class="comment">(*&nbsp;compare_nat&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MatchingLogic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Pattern</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">Σ</span> : <span class="id" title="var">Signature</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;There&nbsp;are&nbsp;two&nbsp;substitution&nbsp;operations&nbsp;over&nbsp;patterns,&nbsp;<span class="inlinecode"><span class="id" title="var">bevar_subst</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">bsvar_subst</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;substitute&nbsp;bound&nbsp;variable&nbsp;x&nbsp;for&nbsp;psi&nbsp;in&nbsp;phi&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">bevar_subst</span> (<span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">phi</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">x'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="keyword">match</span> <span class="id" title="var">compare_nat</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Nat_less</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Nat_equal</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">psi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Nat_greater</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">patt_bound_evar</span> (<span class="id" title="var">Nat.pred</span> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_sym</span> <span class="id" title="var">sigma</span> ⇒ <span class="id" title="var">patt_sym</span> <span class="id" title="var">sigma</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_app</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">patt_app</span> (<span class="id" title="var">bevar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bevar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bott</span> ⇒ <span class="id" title="var">patt_bott</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_imp</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">patt_imp</span> (<span class="id" title="var">bevar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi1</span>) (<span class="id" title="var">bevar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_exists</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">patt_exists</span> (<span class="id" title="var">bevar_subst</span> <span class="id" title="var">psi</span> (<span class="id" title="var">S</span> <span class="id" title="var">x</span>) <span class="id" title="var">phi'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_mu</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">patt_mu</span> (<span class="id" title="var">bevar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">bsvar_subst</span> (<span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">phi</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">x'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="keyword">match</span> <span class="id" title="var">compare_nat</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Nat_less</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Nat_equal</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">psi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Nat_greater</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">patt_bound_svar</span> (<span class="id" title="var">Nat.pred</span> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_sym</span> <span class="id" title="var">sigma</span> ⇒ <span class="id" title="var">patt_sym</span> <span class="id" title="var">sigma</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_app</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">patt_app</span> (<span class="id" title="var">bsvar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bsvar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bott</span> ⇒ <span class="id" title="var">patt_bott</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_imp</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">patt_imp</span> (<span class="id" title="var">bsvar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi1</span>) (<span class="id" title="var">bsvar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_exists</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">patt_exists</span> (<span class="id" title="var">bsvar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_mu</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">patt_mu</span> (<span class="id" title="var">bsvar_subst</span> <span class="id" title="var">psi</span>(<span class="id" title="var">S</span> <span class="id" title="var">x</span>) <span class="id" title="var">phi'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">bevar_occur</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">db_index</span>) : <span class="id" title="var">bool</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">phi</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="keyword">if</span> <span class="id" title="var">decide</span> (<span class="id" title="var">n</span> = <span class="id" title="var">x</span>) <span class="id" title="keyword">is</span> <span class="id" title="tactic">left</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">true</span> <span class="id" title="keyword">else</span> <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_sym</span> <span class="id" title="var">sigma</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_app</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">orb</span> (<span class="id" title="var">bevar_occur</span> <span class="id" title="var">phi1</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bevar_occur</span> <span class="id" title="var">phi2</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bott</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_imp</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">orb</span> (<span class="id" title="var">bevar_occur</span> <span class="id" title="var">phi1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">bevar_occur</span> <span class="id" title="var">phi2</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_exists</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">bevar_occur</span> <span class="id" title="var">phi'</span> (<span class="id" title="var">S</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_mu</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">bevar_occur</span> <span class="id" title="var">phi'</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">bsvar_occur</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">db_index</span>) : <span class="id" title="var">bool</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">phi</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="keyword">if</span> (<span class="id" title="var">decide</span> (<span class="id" title="var">n</span> = <span class="id" title="var">x</span>)) <span class="id" title="keyword">is</span> <span class="id" title="tactic">left</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">true</span> <span class="id" title="keyword">else</span> <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_sym</span> <span class="id" title="var">sigma</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_app</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">orb</span> (<span class="id" title="var">bsvar_occur</span> <span class="id" title="var">phi1</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bsvar_occur</span> <span class="id" title="var">phi2</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bott</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_imp</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">orb</span> (<span class="id" title="var">bsvar_occur</span> <span class="id" title="var">phi1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">bsvar_occur</span> <span class="id" title="var">phi2</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_exists</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">bsvar_occur</span> <span class="id" title="var">phi'</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_mu</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">bsvar_occur</span> <span class="id" title="var">phi'</span> (<span class="id" title="var">S</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;substitute&nbsp;free&nbsp;element&nbsp;variable&nbsp;x&nbsp;for&nbsp;psi&nbsp;in&nbsp;phi&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">free_evar_subst</span> (<span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>) (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">phi</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="keyword">if</span> <span class="id" title="var">decide</span> (<span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) <span class="id" title="keyword">is</span> <span class="id" title="tactic">left</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">psi</span> <span class="id" title="keyword">else</span> <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">X</span> ⇒ <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">x'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">X</span> ⇒ <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_sym</span> <span class="id" title="var">sigma</span> ⇒ <span class="id" title="var">patt_sym</span> <span class="id" title="var">sigma</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_app</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">patt_app</span> (<span class="id" title="var">free_evar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">free_evar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bott</span> ⇒ <span class="id" title="var">patt_bott</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_imp</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">patt_imp</span> (<span class="id" title="var">free_evar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi1</span>) (<span class="id" title="var">free_evar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_exists</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">patt_exists</span> (<span class="id" title="var">free_evar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_mu</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">patt_mu</span> (<span class="id" title="var">free_evar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">x</span> <span class="id" title="var">phi'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;substitute&nbsp;free&nbsp;set&nbsp;variable&nbsp;X&nbsp;for&nbsp;psi&nbsp;in&nbsp;phi&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">free_svar_subst</span> (<span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>) (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) : <span class="id" title="var">Pattern</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">phi</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">X'</span> ⇒ <span class="id" title="keyword">if</span> <span class="id" title="var">decide</span> (<span class="id" title="var">X</span> = <span class="id" title="var">X'</span>) <span class="id" title="keyword">is</span> <span class="id" title="tactic">left</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">psi</span> <span class="id" title="keyword">else</span> <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">X'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">X'</span> ⇒ <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">X'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_sym</span> <span class="id" title="var">sigma</span> ⇒ <span class="id" title="var">patt_sym</span> <span class="id" title="var">sigma</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_app</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">patt_app</span> (<span class="id" title="var">free_svar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">X</span> <span class="id" title="var">phi1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">free_svar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">X</span> <span class="id" title="var">phi2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bott</span> ⇒ <span class="id" title="var">patt_bott</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_imp</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> ⇒ <span class="id" title="var">patt_imp</span> (<span class="id" title="var">free_svar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">X</span> <span class="id" title="var">phi1</span>) (<span class="id" title="var">free_svar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">X</span> <span class="id" title="var">phi2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_exists</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">patt_exists</span> (<span class="id" title="var">free_svar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">X</span> <span class="id" title="var">phi'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_mu</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">patt_mu</span> (<span class="id" title="var">free_svar_subst</span> <span class="id" title="var">psi</span> <span class="id" title="var">X</span> <span class="id" title="var">phi'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;instantiate&nbsp;exists&nbsp;x.&nbsp;p&nbsp;or&nbsp;mu&nbsp;x.&nbsp;p&nbsp;with&nbsp;psi&nbsp;for&nbsp;p&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="tactic">instantiate</span> (<span class="id" title="var">phi</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">phi</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_exists</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">bevar_subst</span> <span class="id" title="var">psi</span> 0 <span class="id" title="var">phi'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_mu</span> <span class="id" title="var">phi'</span> ⇒ <span class="id" title="var">bsvar_subst</span> <span class="id" title="var">psi</span> 0 <span class="id" title="var">phi'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">phi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;replace&nbsp;element&nbsp;variable&nbsp;x&nbsp;with&nbsp;de&nbsp;Bruijn&nbsp;index&nbsp;level&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">evar_quantify</span> (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>) (<span class="id" title="keyword">level</span> : <span class="id" title="var">db_index</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">Pattern</span>) : <span class="id" title="var">Pattern</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="keyword">if</span> <span class="id" title="var">decide</span> (<span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) <span class="id" title="keyword">is</span> <span class="id" title="tactic">left</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">patt_bound_evar</span> <span class="id" title="keyword">level</span> <span class="id" title="keyword">else</span> <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">x'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">x'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">X</span> ⇒ <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_sym</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="var">patt_sym</span> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_app</span> <span class="id" title="var">ls</span> <span class="id" title="var">rs</span> ⇒ <span class="id" title="var">patt_app</span> (<span class="id" title="var">evar_quantify</span> <span class="id" title="var">x</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ls</span>) (<span class="id" title="var">evar_quantify</span> <span class="id" title="var">x</span> <span class="id" title="keyword">level</span> <span class="id" title="var">rs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bott</span> ⇒ <span class="id" title="var">patt_bott</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_imp</span> <span class="id" title="var">ls</span> <span class="id" title="var">rs</span> ⇒ <span class="id" title="var">patt_imp</span> (<span class="id" title="var">evar_quantify</span> <span class="id" title="var">x</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ls</span>) (<span class="id" title="var">evar_quantify</span> <span class="id" title="var">x</span> <span class="id" title="keyword">level</span> <span class="id" title="var">rs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_exists</span> <span class="id" title="var">p'</span> ⇒ <span class="id" title="var">patt_exists</span> (<span class="id" title="var">evar_quantify</span> <span class="id" title="var">x</span> (<span class="id" title="var">S</span> <span class="id" title="keyword">level</span>) <span class="id" title="var">p'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_mu</span> <span class="id" title="var">p'</span> ⇒ <span class="id" title="var">patt_mu</span> (<span class="id" title="var">evar_quantify</span> <span class="id" title="var">x</span> <span class="id" title="keyword">level</span> <span class="id" title="var">p'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;replace&nbsp;set&nbsp;variable&nbsp;X&nbsp;with&nbsp;de&nbsp;Bruijn&nbsp;index&nbsp;level&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">svar_quantify</span> (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>) (<span class="id" title="keyword">level</span> : <span class="id" title="var">db_index</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">Pattern</span>) : <span class="id" title="var">Pattern</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">X'</span> ⇒ <span class="id" title="keyword">if</span> <span class="id" title="var">decide</span> (<span class="id" title="var">X</span> = <span class="id" title="var">X'</span>) <span class="id" title="keyword">is</span> <span class="id" title="tactic">left</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">patt_bound_svar</span> <span class="id" title="keyword">level</span> <span class="id" title="keyword">else</span> <span class="id" title="var">patt_free_svar</span> <span class="id" title="var">X'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">patt_bound_evar</span> <span class="id" title="var">x'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">X</span> ⇒ <span class="id" title="var">patt_bound_svar</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_sym</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="var">patt_sym</span> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_app</span> <span class="id" title="var">ls</span> <span class="id" title="var">rs</span> ⇒ <span class="id" title="var">patt_app</span> (<span class="id" title="var">svar_quantify</span> <span class="id" title="var">X</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ls</span>) (<span class="id" title="var">svar_quantify</span> <span class="id" title="var">X</span> <span class="id" title="keyword">level</span> <span class="id" title="var">rs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_bott</span> ⇒ <span class="id" title="var">patt_bott</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_imp</span> <span class="id" title="var">ls</span> <span class="id" title="var">rs</span> ⇒ <span class="id" title="var">patt_imp</span> (<span class="id" title="var">svar_quantify</span> <span class="id" title="var">X</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ls</span>) (<span class="id" title="var">svar_quantify</span> <span class="id" title="var">X</span> <span class="id" title="keyword">level</span> <span class="id" title="var">rs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_exists</span> <span class="id" title="var">p'</span> ⇒ <span class="id" title="var">patt_exists</span> (<span class="id" title="var">svar_quantify</span> <span class="id" title="var">X</span> <span class="id" title="keyword">level</span> <span class="id" title="var">p'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">patt_mu</span> <span class="id" title="var">p'</span> ⇒ <span class="id" title="var">patt_mu</span> (<span class="id" title="var">svar_quantify</span> <span class="id" title="var">X</span> (<span class="id" title="var">S</span> <span class="id" title="keyword">level</span>) <span class="id" title="var">p'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;replace&nbsp;de&nbsp;Bruijn&nbsp;index&nbsp;k&nbsp;with&nbsp;element&nbsp;variable&nbsp;n&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">evar_open</span> (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>) (<span class="id" title="var">k</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">Pattern</span>) : <span class="id" title="var">Pattern</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bevar_subst</span> (<span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span>) <span class="id" title="var">k</span> <span class="id" title="var">p</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;replace&nbsp;de&nbsp;Bruijn&nbsp;index&nbsp;k&nbsp;with&nbsp;set&nbsp;variable&nbsp;n&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">svar_open</span> (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>) (<span class="id" title="var">k</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">Pattern</span>) : <span class="id" title="var">Pattern</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bsvar_subst</span> (<span class="id" title="var">patt_free_svar</span> <span class="id" title="var">X</span>) <span class="id" title="var">k</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="tactic">subst</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="var">Notations</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;e ^[ 'evar:' dbi ↦ e' ]" := (<span class="id" title="var">bevar_subst</span> <span class="id" title="var">e'</span> <span class="id" title="var">dbi</span> <span class="id" title="var">e</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="var">e'</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">format</span> "e ^[ 'evar:' dbi ↦ e' ]" ) : <span class="id" title="var">ml_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;e ^[ 'svar:' dbi ↦ e' ]" := (<span class="id" title="var">bsvar_subst</span> <span class="id" title="var">e'</span> <span class="id" title="var">dbi</span> <span class="id" title="var">e</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="var">e'</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">format</span> "e ^[ 'svar:' dbi ↦ e' ]" ) : <span class="id" title="var">ml_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;e ^[[ 'evar:' x ↦ e' ]]" := (<span class="id" title="var">free_evar_subst</span> <span class="id" title="var">e'</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="var">e'</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">format</span> "e ^[[ 'evar:' x ↦ e' ]]" ) : <span class="id" title="var">ml_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;e ^[[ 'svar:' X ↦ e' ]]" := (<span class="id" title="var">free_svar_subst</span> <span class="id" title="var">e'</span> <span class="id" title="var">X</span> <span class="id" title="var">e</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="var">e'</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">format</span> "e ^[[ 'svar:' X ↦ e' ]]" ) : <span class="id" title="var">ml_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;e ^{ 'evar:' db ↦ x }" := (<span class="id" title="var">evar_open</span> <span class="id" title="var">x</span> <span class="id" title="var">db</span> <span class="id" title="var">e</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="var">x</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">format</span> "e ^{ 'evar:' db ↦ x }" ) : <span class="id" title="var">ml_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;e ^{ 'svar:' db ↦ x }" := (<span class="id" title="var">svar_open</span> <span class="id" title="var">x</span> <span class="id" title="var">db</span> <span class="id" title="var">e</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="var">x</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">format</span> "e ^{ 'svar:' db ↦ x }" ) : <span class="id" title="var">ml_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;e ^{{ 'evar:' x ↦ db }}" := (<span class="id" title="var">evar_quantify</span> <span class="id" title="var">x</span> <span class="id" title="var">db</span> <span class="id" title="var">e</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="var">x</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">format</span> "e ^{{ 'evar:' x ↦ db }}" ) : <span class="id" title="var">ml_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;e ^{{ 'svar:' x ↦ db }}" := (<span class="id" title="var">svar_quantify</span> <span class="id" title="var">x</span> <span class="id" title="var">db</span> <span class="id" title="var">e</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="var">x</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">format</span> "e ^{{ 'svar:' x ↦ db }}" ) : <span class="id" title="var">ml_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;e ^ [ e' ]" := (<span class="id" title="tactic">instantiate</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2, <span class="id" title="var">e'</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">ml_scope</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Notations</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">Notations</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ml_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">Σ</span> : <span class="id" title="var">Signature</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">exists_quantify</span> (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">Pattern</span>) : <span class="id" title="var">Pattern</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">patt_exists</span> (<span class="id" title="var">p</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ 0}}).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mu_quantify</span> (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">Pattern</span>) : <span class="id" title="var">Pattern</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">patt_mu</span> (<span class="id" title="var">p</span>^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ 0}}).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">evar_open_size</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">k</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">n</span> : <span class="id" title="tactic">evar</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">Pattern</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">size</span> <span class="id" title="var">p</span> = <span class="id" title="var">size</span> (<span class="id" title="var">p</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">k</span> ↦ <span class="id" title="var">n</span>}).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">svar_open_size</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">k</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">svar</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">Pattern</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">size</span> <span class="id" title="var">p</span> = <span class="id" title="var">size</span> (<span class="id" title="var">p</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">k</span> ↦ <span class="id" title="var">n</span>}).<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;From&nbsp;https://www.chargueraud.org/research/2009/ln/main.pdf&nbsp;in&nbsp;3.3&nbsp;(body&nbsp;def.)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">wfc_body_ex</span> <span class="id" title="var">phi</span>  := <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <br/>
&nbsp;&nbsp;&nbsp;¬ <span class="id" title="var">elem_of</span> <span class="id" title="var">x</span> (<span class="id" title="var">free_evars</span> <span class="id" title="var">phi</span>) → <span class="id" title="var">well_formed_closed</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: 0 ↦ <span class="id" title="var">x</span>}) = <span class="id" title="var">true</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">positive_negative_occurrence_evar_open_and</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">db1</span> <span class="id" title="var">db2</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>),<br/>
&nbsp;&nbsp;&nbsp;<span class="comment">(*le&nbsp;db1&nbsp;db2&nbsp;-&gt;*)</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">db1</span> <span class="id" title="var">phi</span> → <span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">db1</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">db2</span> ↦ <span class="id" title="var">x</span>}))<br/>
&nbsp;&nbsp;&nbsp;∧ (<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">db1</span> <span class="id" title="var">phi</span> → <span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">db1</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">db2</span> ↦ <span class="id" title="var">x</span>})).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_negative_occurrence_evar_open</span> <span class="id" title="var">phi</span> <span class="id" title="var">db1</span> <span class="id" title="var">db2</span> <span class="id" title="var">x</span>:<br/>
&nbsp;<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">db1</span> <span class="id" title="var">phi</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">db1</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">db2</span> ↦ <span class="id" title="var">x</span>}) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_positive_occurrence_evar_open</span> <span class="id" title="var">phi</span> <span class="id" title="var">db1</span> <span class="id" title="var">db2</span> <span class="id" title="var">x</span>:<br/>
&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">db1</span> <span class="id" title="var">phi</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">db1</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">db2</span> ↦ <span class="id" title="var">x</span>}) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="comment">(*Helper&nbsp;lemma&nbsp;for&nbsp;wf_body_to_wf_ex*)</span><br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_ex_aux_body_ex_imp2</span>:<br/>
&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}) <span class="id" title="var">n</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="comment">(*Helper&nbsp;lemma&nbsp;for&nbsp;wf_body_to_wf_ex*)</span><br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_mu_aux_body_ex_imp2</span>:<br/>
&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}) <span class="id" title="var">n'</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> <span class="id" title="var">n'</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_ex_aux_body_mu_imp2</span>:<br/>
&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">n'</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> <span class="id" title="var">n'</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_mu_aux_body_mu_imp2</span>:<br/>
&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">n</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_ex_aux_bevar_subst</span> :<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→ <span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">psi</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→ <span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">phi</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi</span>]) <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_mu_aux_bevar_subst</span> :<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> <span class="id" title="var">n'</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→ <span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi</span> <span class="id" title="var">n'</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→ <span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">phi</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi</span>]) <span class="id" title="var">n'</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_ex_aux_bsvar_subst</span> :<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→ <span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">psi</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→ <span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">n'</span> ↦ <span class="id" title="var">psi</span>]) <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_mu_aux_bsvar_subst</span> :<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">n'</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n'</span>) = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→ <span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi</span> <span class="id" title="var">n'</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→ <span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">n'</span> ↦ <span class="id" title="var">psi</span>]) <span class="id" title="var">n'</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="comment">(*Helper&nbsp;lemma&nbsp;for&nbsp;wf_ex_to_wf_body&nbsp;*)</span><br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">wfc_ex_aux_body_ex_imp1</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}) <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">wfc_mu_aux_body_ex_imp1</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> <span class="id" title="var">n'</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}) <span class="id" title="var">n'</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">wfc_ex_aux_body_mu_imp1</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> <span class="id" title="var">n'</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">n'</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">wfc_mu_aux_body_mu_imp1</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_mu_aux_bsvar_subst_le</span> :<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span>, <span class="id" title="var">n'</span> ≤ <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi</span> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>:<span class="id" title="var">n'</span> ↦ <span class="id" title="var">psi</span>]) <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_ex_aux_bsvar_subst_le</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span>, <span class="id" title="var">n'</span> ≤ <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">psi</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">phi</span>^[<span class="id" title="tactic">evar</span>:<span class="id" title="var">n'</span>↦<span class="id" title="var">psi</span>]) <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">wfc_mu_aux_body_mu_imp3</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> <span class="id" title="var">X</span>, <span class="id" title="var">n'</span> ≤ <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">n'</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">wfc_mu_aux_body_ex_imp3</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> <span class="id" title="var">X</span>, <span class="id" title="var">n'</span> ≤ <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;→<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n'</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">wfc_ex_aux_body_iff</span>: <br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;↔<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}) <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">wfc_mu_aux_body_iff</span>: <br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;↔<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="comment">(*If&nbsp;(ex,&nbsp;phi)&nbsp;is&nbsp;closed,&nbsp;then&nbsp;its&nbsp;body&nbsp;is&nbsp;closed&nbsp;too*)</span><br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">wfc_ex_to_wfc_body</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span>, <span class="id" title="var">well_formed_closed</span> (<span class="id" title="var">patt_exists</span> <span class="id" title="var">phi</span>) = <span class="id" title="var">true</span> → <span class="id" title="var">wfc_body_ex</span> <span class="id" title="var">phi</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_neg_occ_db_bevar_subst</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span>:<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi</span> 0 = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">phi</span> = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">dbi1</span> (<span class="id" title="var">phi</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">psi</span>]) = <span class="id" title="var">true</span><br/>
<span class="id" title="keyword">with</span> <span class="id" title="var">no_pos_occ_db_bevar_subst</span>  <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi</span> 0 = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">phi</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">dbi1</span> (<span class="id" title="var">phi</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">psi</span>]) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bevar_subst_positive_2</span> :<br/>
<span class="id" title="keyword">∀</span> φ ψ <span class="id" title="var">n</span>,<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> ψ 0 = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">well_formed_positive</span> φ = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">well_formed_positive</span> ψ = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">well_formed_positive</span> (φ^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ ψ])  = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">wfp_evar_open</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>,<br/>
<span class="id" title="var">well_formed_positive</span> <span class="id" title="var">phi</span> = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">well_formed_positive</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Additional&nbsp;lemmas:&nbsp;evar_open,&nbsp;svar_open,&nbsp;freshness,&nbsp;well_formedness,&nbsp;etc.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;evar_open&nbsp;and&nbsp;evar_quantify&nbsp;are&nbsp;inverses&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">evar_open_evar_quantify</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> <span class="id" title="var">phi</span>:<br/>
<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> →<br/>
((<span class="id" title="var">phi</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}})^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}) = <span class="id" title="var">phi</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">svar_open_svar_quantify</span> <span class="id" title="var">X</span> <span class="id" title="var">n</span> <span class="id" title="var">phi</span>:<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> <span class="id" title="var">n</span> →<br/>
((<span class="id" title="var">phi</span>^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">n</span>}})^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>}) = <span class="id" title="var">phi</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">evar_quantify_evar_open</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> <span class="id" title="var">phi</span>:<br/>
<span class="id" title="var">x</span> ∉ <span class="id" title="var">free_evars</span> <span class="id" title="var">phi</span> → <span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) →<br/>
((<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>})^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}) = <span class="id" title="var">phi</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">svar_quantify_svar_open</span> <span class="id" title="var">X</span> <span class="id" title="var">n</span> <span class="id" title="var">phi</span>:<br/>
<span class="id" title="var">X</span> ∉ <span class="id" title="var">free_svars</span> <span class="id" title="var">phi</span> → <span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) →<br/>
((<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>})^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">n</span>}}) = <span class="id" title="var">phi</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">double_evar_quantify</span> φ : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>,<br/>
φ^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}} = φ^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">double_svar_quantify</span> φ : <span class="id" title="keyword">∀</span> <span class="id" title="var">X</span> <span class="id" title="var">n</span>,<br/>
φ^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">n</span>}}^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">n</span>}} = φ^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">n</span>}}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">well_formed_bevar_subst</span> φ : <span class="id" title="keyword">∀</span> ψ <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
<span class="id" title="var">m</span> ≥ <span class="id" title="var">n</span> → <span class="id" title="var">well_formed_closed_ex_aux</span> φ <span class="id" title="var">n</span> →<br/>
(φ^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ ψ]) = φ.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">well_formed_bsvar_subst</span> φ : <span class="id" title="keyword">∀</span> ψ <span class="id" title="var">k</span> <span class="id" title="var">m</span>,<br/>
<span class="id" title="var">m</span> ≥ <span class="id" title="var">k</span> → <span class="id" title="var">well_formed_closed_mu_aux</span> φ <span class="id" title="var">k</span> →<br/>
(φ^[<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ ψ]) = φ.<br/>

<br/>
<span class="comment">(*&nbsp;bevar_subst&nbsp;is&nbsp;identity&nbsp;if&nbsp;n&nbsp;does&nbsp;not&nbsp;occur&nbsp;in&nbsp;phi&nbsp;*)</span><br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">bevar_subst_not_occur</span> <span class="id" title="var">n</span> ψ <span class="id" title="var">ϕ</span> :<br/>
<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">n</span> →<br/>
(<span class="id" title="var">ϕ</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ ψ]) = <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="comment">(*&nbsp;evar_open&nbsp;is&nbsp;identity&nbsp;if&nbsp;n&nbsp;does&nbsp;not&nbsp;occur&nbsp;in&nbsp;phi&nbsp;*)</span><br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">evar_open_not_occur</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="var">ϕ</span> :<br/>
<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">n</span> →<br/>
<span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>} = <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="comment">(*&nbsp;bsvar_subst&nbsp;is&nbsp;identity&nbsp;if&nbsp;n&nbsp;does&nbsp;not&nbsp;occur&nbsp;in&nbsp;phi&nbsp;*)</span><br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">bsvar_subst_not_occur</span> <span class="id" title="var">n</span> ψ <span class="id" title="var">ϕ</span> :<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">n</span> →<br/>
(<span class="id" title="var">ϕ</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ ψ]) = <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="comment">(*&nbsp;evar_open&nbsp;is&nbsp;identity&nbsp;if&nbsp;n&nbsp;does&nbsp;not&nbsp;occur&nbsp;in&nbsp;phi&nbsp;*)</span><br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">svar_open_not_occur</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="var">ϕ</span> :<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">n</span> →<br/>
<span class="id" title="var">ϕ</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>} = <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="comment">(*&nbsp;opening&nbsp;on&nbsp;closed&nbsp;patterns&nbsp;is&nbsp;identity&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">evar_open_closed</span> :<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span>,<br/>
<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> 0 →<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">v</span>} = <span class="id" title="var">phi</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">svar_open_closed</span> :<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span>,<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> 0 →<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">v</span>} = <span class="id" title="var">phi</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bevar_subst_comm_higher</span> :<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi1</span> <span class="id" title="var">psi2</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <br/>
<span class="id" title="var">n</span> &gt; <span class="id" title="var">m</span> → <span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">psi1</span> 0 → <span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">psi2</span> 0 →<br/>
(<span class="id" title="var">phi</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi1</span>])^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">psi2</span>] = <br/>
(<span class="id" title="var">phi</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">psi2</span>])^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">pred</span> <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi1</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bevar_subst_comm_lower</span> :<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi1</span> <span class="id" title="var">psi2</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <br/>
<span class="id" title="var">n</span> &lt; <span class="id" title="var">m</span> → <span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">psi1</span> 0 → <span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">psi2</span> 0 →<br/>
(<span class="id" title="var">phi</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi1</span>])^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">psi2</span>] = <br/>
(<span class="id" title="var">phi</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">S</span> <span class="id" title="var">m</span> ↦ <span class="id" title="var">psi2</span>])^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi1</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bsvar_subst_comm_higher</span> :<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi1</span> <span class="id" title="var">psi2</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <br/>
<span class="id" title="var">n</span> &gt; <span class="id" title="var">m</span> → <span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi1</span> 0 → <span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi2</span> 0 →<br/>
(<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi1</span>])^[<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">psi2</span>] = <br/>
(<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">psi2</span>])^[<span class="id" title="var">svar</span>: <span class="id" title="var">pred</span> <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi1</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bsvar_subst_comm_lower</span> :<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi1</span> <span class="id" title="var">psi2</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <br/>
<span class="id" title="var">n</span> &lt; <span class="id" title="var">m</span> → <span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi1</span> 0 → <span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi2</span> 0 →<br/>
(<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi1</span>])^[<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">psi2</span>] = <br/>
(<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">S</span> <span class="id" title="var">m</span> ↦ <span class="id" title="var">psi2</span>])^[<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi1</span>].<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">evar_open_comm_higher</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
<span class="id" title="var">n</span> &lt; <span class="id" title="var">m</span> <br/>
→<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">phi</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">y</span>}^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>} = <span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">pred</span> <span class="id" title="var">m</span> ↦ <span class="id" title="var">y</span>}.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">evar_open_comm_lower</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
<span class="id" title="var">n</span> &gt; <span class="id" title="var">m</span> <br/>
→<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">phi</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">y</span>}^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>} = <span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">S</span> <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">y</span>}.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">svar_open_comm_higher</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
<span class="id" title="var">n</span> &lt; <span class="id" title="var">m</span> <br/>
→<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">phi</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">Y</span>}^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>} = <span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>}^{<span class="id" title="var">svar</span>: <span class="id" title="var">pred</span> <span class="id" title="var">m</span> ↦ <span class="id" title="var">Y</span>} .<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">svar_open_comm_lower</span>:<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
<span class="id" title="var">n</span> &gt; <span class="id" title="var">m</span><br/>
→<br/>
<span class="id" title="keyword">∀</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">phi</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">Y</span>} ^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>} = <span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">S</span> <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>} ^{<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">Y</span>}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bevar_subst_bsvar_subst</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi1</span> <span class="id" title="var">psi2</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span><br/>
: <span class="id" title="var">well_formed_closed</span> <span class="id" title="var">psi1</span> → <span class="id" title="var">well_formed_closed</span> <span class="id" title="var">psi2</span> →<br/>
(<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi1</span> ↦ <span class="id" title="var">psi1</span>])^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">psi2</span>] = <br/>
(<span class="id" title="var">phi</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">psi2</span>])^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi1</span> ↦ <span class="id" title="var">psi1</span>].<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">svar_open_evar_open_comm</span><br/>
: <span class="id" title="keyword">∀</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">dbi1</span> : <span class="id" title="var">db_index</span>)(<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>)(<span class="id" title="var">dbi2</span> : <span class="id" title="var">db_index</span>)(<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">X</span>}^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi1</span> ↦ <span class="id" title="var">x</span>}  = <span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi1</span> ↦ <span class="id" title="var">x</span>}^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">X</span>} .<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_svars_evar_open</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">ϕ</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">dbi</span> :<span class="id" title="var">db_index</span>) (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>),<br/>
<span class="id" title="var">free_svars</span> <span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">x</span>} = <span class="id" title="var">free_svars</span> <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">positive_negative_occurrence_db_named</span> :<br/>
<span class="id" title="keyword">∀</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">dbi</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">dbi</span> <span class="id" title="var">phi</span> →<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_positive_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span> = <span class="id" title="var">false</span> →<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_positive_occurrence</span> <span class="id" title="var">X</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">X</span>}) = <span class="id" title="var">false</span>)<br/>
&nbsp;&nbsp;∧ (<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">dbi</span> <span class="id" title="var">phi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_negative_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span> = <span class="id" title="var">false</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_negative_occurrence</span> <span class="id" title="var">X</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">X</span>}) = <span class="id" title="var">false</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">positive_negative_occurrence_evar_open</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">ϕ</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>) (<span class="id" title="var">dbi</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="var">svar_has_positive_occurrence</span> <span class="id" title="var">X</span> (<span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">x</span>}) = <span class="id" title="var">false</span> ↔ <span class="id" title="var">svar_has_positive_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">false</span>)<br/>
&nbsp;&nbsp;∧ (<span class="id" title="var">svar_has_negative_occurrence</span> <span class="id" title="var">X</span> (<span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">x</span>}) = <span class="id" title="var">false</span> ↔ <span class="id" title="var">svar_has_negative_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">false</span>).<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">positive_occurrence_evar_open</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">ϕ</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>) (<span class="id" title="var">dbi</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">svar_has_positive_occurrence</span> <span class="id" title="var">X</span> (<span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">x</span>}) = <span class="id" title="var">false</span> ↔ <span class="id" title="var">svar_has_positive_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">negative_occurrence_evar_open</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">ϕ</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>) (<span class="id" title="var">dbi</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">svar_has_negative_occurrence</span> <span class="id" title="var">X</span> (<span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">x</span>}) = <span class="id" title="var">false</span> ↔ <span class="id" title="var">svar_has_negative_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">positive_negative_occurrence_db_svar_open_le</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">dbi1</span> &lt; <span class="id" title="var">dbi2</span> →<br/>
&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">phi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">dbi1</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">X</span>})<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;∧ (<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">phi</span> → <span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">dbi1</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">X</span>})).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfp_svar_open</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">dbi</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_positive</span> <span class="id" title="var">phi</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_positive</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">X</span>}) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">positive_negative_occurrence_named_svar_open</span> :<br/>
<span class="id" title="keyword">∀</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">X</span> <span class="id" title="var">Y</span> : <span class="id" title="var">svar</span>) (<span class="id" title="var">dbi</span> : <span class="id" title="var">db_index</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">X</span> ≠ <span class="id" title="var">Y</span> →<br/>
&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_negative_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span> = <span class="id" title="var">false</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_negative_occurrence</span> <span class="id" title="var">X</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">Y</span>}) = <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;) ∧ (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_positive_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span> = <span class="id" title="var">false</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_positive_occurrence</span> <span class="id" title="var">X</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">Y</span>}) = <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;).<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">evar_open_wfc_aux</span> <span class="id" title="var">db1</span> <span class="id" title="var">db2</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span> :<br/>
<span class="id" title="var">db1</span> ≤ <span class="id" title="var">db2</span> →<br/>
<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> <span class="id" title="var">db1</span> →<br/>
<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">db2</span> ↦ <span class="id" title="var">X</span>} = <span class="id" title="var">phi</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">evar_open_wfc</span> <span class="id" title="var">m</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span> : <span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi</span> 0 → <span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>} = <span class="id" title="var">phi</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">svar_open_wfc_aux</span> <span class="id" title="var">db1</span> <span class="id" title="var">db2</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span> :<br/>
<span class="id" title="var">db1</span> ≤ <span class="id" title="var">db2</span> →<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> <span class="id" title="var">db1</span> →<br/>
<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">db2</span> ↦ <span class="id" title="var">X</span>} = <span class="id" title="var">phi</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">svar_open_wfc</span> <span class="id" title="var">m</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span> : <span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">phi</span> 0 → <span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>} = <span class="id" title="var">phi</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">evar_open_bsvar_subst</span> <span class="id" title="var">m</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">dbi</span> <span class="id" title="var">X</span><br/>
: <span class="id" title="var">well_formed_closed</span> <span class="id" title="var">phi2</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">phi1</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>]^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;= <span class="id" title="var">phi1</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>].<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">svar_open_bevar_subst</span> <span class="id" title="var">m</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">dbi</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">well_formed_closed</span> <span class="id" title="var">phi2</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">phi1</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>]^{<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">phi1</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>].<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">svar_open_bsvar_subst_higher</span> <span class="id" title="var">m</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">dbi</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">well_formed_closed</span> <span class="id" title="var">phi2</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">m</span> &lt; <span class="id" title="var">dbi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">phi1</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>]^{<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">phi1</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}^[<span class="id" title="var">svar</span>: <span class="id" title="var">pred</span> <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>].<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">svar_open_bsvar_subst_lower</span> <span class="id" title="var">m</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">dbi</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">well_formed_closed</span> <span class="id" title="var">phi2</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">m</span> &gt; <span class="id" title="var">dbi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">phi1</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>]^{<span class="id" title="var">svar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">phi1</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">S</span> <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>].<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">evar_open_bevar_subst_higher</span> <span class="id" title="var">m</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">dbi</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">phi2</span> 0 →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">m</span> &lt; <span class="id" title="var">dbi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">phi1</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>]^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">phi1</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">pred</span> <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>].<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">evar_open_bevar_subst_lower</span> <span class="id" title="var">m</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">dbi</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">well_formed_closed</span> <span class="id" title="var">phi2</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">m</span> &gt; <span class="id" title="var">dbi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">phi1</span>^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>]^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">phi1</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">S</span> <span class="id" title="var">m</span> ↦ <span class="id" title="var">X</span>}^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">phi2</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_svars_bsvar_subst'</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> φ ψ <span class="id" title="var">dbi</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">X</span> ∈ <span class="id" title="var">free_svars</span> (φ^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ ψ])) ↔<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">X</span> ∈ (<span class="id" title="var">free_svars</span> ψ) ∧ <span class="id" title="var">bsvar_occur</span> φ <span class="id" title="var">dbi</span>) ∨ (<span class="id" title="var">X</span> ∈ (<span class="id" title="var">free_svars</span> φ))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_evars_bsvar_subst'</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> φ ψ <span class="id" title="var">dbi</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span> ∈ <span class="id" title="var">free_evars</span> (φ^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ ψ])) ↔<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">x</span> ∈ (<span class="id" title="var">free_evars</span> ψ) ∧ <span class="id" title="var">bsvar_occur</span> φ <span class="id" title="var">dbi</span>) ∨ (<span class="id" title="var">x</span> ∈ (<span class="id" title="var">free_evars</span> φ))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_evars_bevar_subst'</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> φ ψ <span class="id" title="var">dbi</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">X</span> ∈ <span class="id" title="var">free_evars</span> (φ^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ ψ])) ↔<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">X</span> ∈ (<span class="id" title="var">free_evars</span> ψ) ∧ <span class="id" title="var">bevar_occur</span> φ <span class="id" title="var">dbi</span>) ∨ (<span class="id" title="var">X</span> ∈ (<span class="id" title="var">free_evars</span> φ))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_svars_bsvar_subst</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> φ ψ <span class="id" title="var">dbi</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">free_svars</span> (φ^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ ψ]) ⊆ <span class="id" title="var">union</span> (<span class="id" title="var">free_svars</span> ψ) (<span class="id" title="var">free_svars</span> φ).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_evars_bevar_subst</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> φ ψ <span class="id" title="var">dbi</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">free_evars</span> (φ^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ ψ]) ⊆ <span class="id" title="var">union</span> (<span class="id" title="var">free_evars</span> ψ) (<span class="id" title="var">free_evars</span> φ).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_svars_svar_open''</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">dbi</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>,<br/>
&nbsp;&nbsp;(<span class="id" title="var">X</span> ∈ <span class="id" title="var">free_svars</span> (φ^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">Y</span>})) ↔<br/>
&nbsp;&nbsp;(((<span class="id" title="var">X</span> = <span class="id" title="var">Y</span>) ∧ (<span class="id" title="var">bsvar_occur</span> φ <span class="id" title="var">dbi</span>)) ∨ (<span class="id" title="var">X</span> ∈ (<span class="id" title="var">free_svars</span> φ))).<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">free_svars_svar_open</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">X</span> <span class="id" title="var">dbi</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">free_svars</span> (<span class="id" title="var">ϕ</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">X</span>}) ⊆ <span class="id" title="var">union</span> (<span class="id" title="var">singleton</span> <span class="id" title="var">X</span>) (<span class="id" title="var">free_svars</span> <span class="id" title="var">ϕ</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_evars_evar_open''</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">dbi</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> ∈ <span class="id" title="var">free_evars</span> (φ^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">y</span>})) ↔<br/>
&nbsp;&nbsp;((<span class="id" title="var">x</span> = <span class="id" title="var">y</span> ∧ <span class="id" title="var">bevar_occur</span> φ <span class="id" title="var">dbi</span>) ∨ (<span class="id" title="var">x</span> ∈ (<span class="id" title="var">free_evars</span> φ))).<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">free_evars_evar_open</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">x</span> <span class="id" title="var">dbi</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">free_evars</span> (<span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">x</span>}) ⊆ <span class="id" title="var">union</span> (<span class="id" title="var">singleton</span> <span class="id" title="var">x</span>) (<span class="id" title="var">free_evars</span> <span class="id" title="var">ϕ</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_evars_evar_open'</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">x</span> <span class="id" title="var">dbi</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">free_evars</span> <span class="id" title="var">ϕ</span> ⊆ <span class="id" title="var">free_evars</span> (<span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">x</span>}).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_evar_subst_no_occurrence</span> <span class="id" title="var">x</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> ∉ <span class="id" title="var">free_evars</span> <span class="id" title="var">p</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span>^[[<span class="id" title="tactic">evar</span>:<span class="id" title="var">x</span> ↦ <span class="id" title="var">q</span>]] = <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Private_bsvar_occur_evar_open</span> <span class="id" title="var">sz</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span>:<br/>
<span class="id" title="var">size</span> <span class="id" title="var">phi</span> ≤ <span class="id" title="var">sz</span> →<br/>
<span class="id" title="var">bsvar_occur</span> <span class="id" title="var">phi</span> <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span> →<br/>
<span class="id" title="var">bsvar_occur</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">bsvar_occur_evar_open</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span>:<br/>
<span class="id" title="var">bsvar_occur</span> <span class="id" title="var">phi</span> <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span> →<br/>
<span class="id" title="var">bsvar_occur</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Private_bevar_occur_svar_open</span> <span class="id" title="var">sz</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span>:<br/>
<span class="id" title="var">size</span> <span class="id" title="var">phi</span> ≤ <span class="id" title="var">sz</span> →<br/>
<span class="id" title="var">bevar_occur</span> <span class="id" title="var">phi</span> <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span> →<br/>
<span class="id" title="var">bevar_occur</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">bevar_occur_svar_open</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span>:<br/>
<span class="id" title="var">bevar_occur</span> <span class="id" title="var">phi</span> <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span> →<br/>
<span class="id" title="var">bevar_occur</span> (<span class="id" title="var">phi</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Private_bevar_occur_evar_open</span> <span class="id" title="var">sz</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span>:<br/>
<span class="id" title="var">size</span> <span class="id" title="var">phi</span> ≤ <span class="id" title="var">sz</span> → <span class="id" title="var">dbi1</span> &lt; <span class="id" title="var">dbi2</span> →<br/>
<span class="id" title="var">bevar_occur</span> <span class="id" title="var">phi</span> <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span> →<br/>
<span class="id" title="var">bevar_occur</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">bevar_occur_evar_open</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span>:<br/>
<span class="id" title="var">bevar_occur</span> <span class="id" title="var">phi</span> <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span> → <span class="id" title="var">dbi1</span> &lt; <span class="id" title="var">dbi2</span> →<br/>
<span class="id" title="var">bevar_occur</span> (<span class="id" title="var">phi</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">X</span>}) <span class="id" title="var">dbi1</span> = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">well_formed_positive_bevar_subst</span> φ : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> ψ,<br/>
<span class="id" title="var">mu_free</span> φ →<br/>
<span class="id" title="var">well_formed_positive</span> φ = <span class="id" title="var">true</span> → <span class="id" title="var">well_formed_positive</span> ψ = <span class="id" title="var">true</span><br/>
→<br/>
<span class="id" title="var">well_formed_positive</span> (φ^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ ψ]) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mu_free_bevar_subst</span> :<br/>
<span class="id" title="keyword">∀</span> φ ψ, <span class="id" title="var">mu_free</span> φ → <span class="id" title="var">mu_free</span> ψ → <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <span class="id" title="var">mu_free</span> (φ^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ ψ]).<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">mu_free_evar_open</span> :<br/>
<span class="id" title="keyword">∀</span> φ, <span class="id" title="var">mu_free</span> φ → <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>, <span class="id" title="var">mu_free</span> (φ^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">evar_open_free_evar_subst_swap</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">x</span> <span class="id" title="var">n</span> ψ <span class="id" title="var">y</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">well_formed</span> ψ →<br/>
&nbsp;&nbsp;φ^[[<span class="id" title="tactic">evar</span>: <span class="id" title="var">y</span> ↦ ψ]]^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>} = φ^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}^[[<span class="id" title="tactic">evar</span>: <span class="id" title="var">y</span> ↦ ψ]].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_evars_free_evar_subst</span> : <span class="id" title="keyword">∀</span> φ ψ <span class="id" title="var">x</span>,<br/>
<span class="id" title="var">free_evars</span> (φ^[[<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ ψ]]) ⊆ <span class="id" title="var">free_evars</span> φ ∪ <span class="id" title="var">free_evars</span> ψ.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bound_to_free_variable_subst</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> ψ,<br/>
&nbsp;&nbsp;<span class="id" title="var">m</span> &gt; <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> ψ 0 →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> φ <span class="id" title="var">m</span> → <span class="id" title="var">x</span> ∉ <span class="id" title="var">free_evars</span> φ →<br/>
&nbsp;&nbsp;φ^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ ψ] = φ^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}^[[<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ ψ]].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bound_to_free_set_variable_subst</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">X</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> ψ,<br/>
&nbsp;&nbsp;<span class="id" title="var">m</span> &gt; <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> ψ 0 →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> φ <span class="id" title="var">m</span> → <span class="id" title="var">X</span> ∉ <span class="id" title="var">free_svars</span> φ →<br/>
&nbsp;&nbsp;φ^[<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ ψ] = φ^{<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">X</span>}^[[<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ ψ]].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">evar_open_no_negative_occurrence</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">db1</span> <span class="id" title="var">db2</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;(<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">db1</span> (φ^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">db2</span> ↦ <span class="id" title="var">x</span>}) →<br/>
&nbsp;&nbsp;<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">db1</span> φ) ∧<br/>
&nbsp;&nbsp;(<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">db1</span> (φ^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">db2</span> ↦ <span class="id" title="var">x</span>}) →<br/>
&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">db1</span> φ).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">evar_open_positive</span> : <span class="id" title="keyword">∀</span> φ <span class="id" title="var">n</span> <span class="id" title="var">x</span>,<br/>
<span class="id" title="var">well_formed_positive</span> (φ^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}) = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">well_formed_positive</span> φ = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bevar_subst_closed_mu</span> :<br/>
<span class="id" title="keyword">∀</span> φ ψ <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> φ <span class="id" title="var">m</span> = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> ψ <span class="id" title="var">m</span> = <span class="id" title="var">true</span><br/>
→<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> (φ^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ ψ]) <span class="id" title="var">m</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bevar_subst_closed_ex</span> :<br/>
<span class="id" title="keyword">∀</span> φ ψ <span class="id" title="var">n</span>,<br/>
<span class="id" title="var">well_formed_closed_ex_aux</span> φ (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">well_formed_closed_ex_aux</span> ψ <span class="id" title="var">n</span> = <span class="id" title="var">true</span><br/>
→<br/>
<span class="id" title="var">well_formed_closed_ex_aux</span> (φ^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ ψ]) <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bevar_subst_positive</span> :<br/>
<span class="id" title="keyword">∀</span> φ ψ <span class="id" title="var">n</span>, <span class="id" title="var">mu_free</span> φ →<br/>
<span class="id" title="var">well_formed_positive</span> φ = <span class="id" title="var">true</span> → <span class="id" title="var">well_formed_positive</span> ψ = <span class="id" title="var">true</span><br/>
→<br/>
<span class="id" title="var">well_formed_positive</span> (φ^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ ψ]) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">evar_quantify_closed_ex</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">x</span> <span class="id" title="var">n</span>, <span class="id" title="var">well_formed_closed_ex_aux</span> φ <span class="id" title="var">n</span> →<br/>
<span class="id" title="var">well_formed_closed_ex_aux</span> (φ^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}) (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">svar_quantify_closed_mu</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">X</span> <span class="id" title="var">n</span>, <span class="id" title="var">well_formed_closed_mu_aux</span> φ <span class="id" title="var">n</span> →<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> (φ^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">n</span>}}) (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">evar_quantify_closed_mu</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">x</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <span class="id" title="var">well_formed_closed_mu_aux</span> φ <span class="id" title="var">m</span> →<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> (φ^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}) <span class="id" title="var">m</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">svar_quantify_closed_ex</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">X</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <span class="id" title="var">well_formed_closed_ex_aux</span> φ <span class="id" title="var">m</span> →<br/>
<span class="id" title="var">well_formed_closed_ex_aux</span> (φ^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">n</span>}}) <span class="id" title="var">m</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">no_occ_quantify</span> : <br/>
∀ (φ : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">db1</span> <span class="id" title="var">db2</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>),<br/>
(<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">db1</span> φ<br/>
&nbsp;→ <span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">db1</span> (φ^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">db2</span>}}))<br/>
∧ (<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">db1</span> φ<br/>
&nbsp;&nbsp;&nbsp;→ <span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">db1</span> (φ^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">db2</span>}})).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">evar_quantify_positive</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">x</span> <span class="id" title="var">n</span>, <span class="id" title="var">well_formed_positive</span> φ →<br/>
<span class="id" title="var">well_formed_positive</span> (φ^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">evar_quantify_well_formed</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">x</span>, <span class="id" title="var">well_formed</span> φ →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed</span> (<span class="id" title="var">patt_exists</span> (φ^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ 0}})) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">evar_quantify_no_occurrence</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">x</span> <span class="id" title="var">n</span>, <span class="id" title="var">x</span> ∉ (<span class="id" title="var">free_evars</span> (φ^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}})).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">svar_quantify_not_free</span> :<br/>
<span class="id" title="keyword">∀</span> φ <span class="id" title="var">X</span> <span class="id" title="var">n</span>, <span class="id" title="var">X</span> ∉ (<span class="id" title="var">free_svars</span> (φ^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">n</span>}})).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">evar_quantify_not_free_evars</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> φ <span class="id" title="var">x</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> ∉ <span class="id" title="var">free_evars</span> φ →<br/>
&nbsp;&nbsp;φ^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}} = φ.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wf_ex_evar_quantify</span> <span class="id" title="var">x</span> <span class="id" title="var">p</span>:<br/>
<span class="id" title="var">well_formed</span> <span class="id" title="var">p</span> = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">well_formed</span> (<span class="id" title="var">patt_exists</span> (<span class="id" title="var">p</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ 0}})) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_evars_evar_quantify</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> <span class="id" title="var">p</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">free_evars</span> (<span class="id" title="var">p</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}) = <span class="id" title="var">free_evars</span> <span class="id" title="var">p</span> ∖ {[<span class="id" title="var">x</span>]}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_svars_svar_quantify</span> <span class="id" title="var">X</span> <span class="id" title="var">n</span> <span class="id" title="var">p</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">free_svars</span> (<span class="id" title="var">p</span>^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">n</span>}}) = <span class="id" title="var">free_svars</span> <span class="id" title="var">p</span> ∖ {[<span class="id" title="var">X</span>]}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_neg_occ_db_bsvar_subst</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span>:<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi</span> 0 = <span class="id" title="var">true</span> → <span class="id" title="var">dbi1</span> &lt; <span class="id" title="var">dbi2</span> →<br/>
(<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">phi</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">dbi1</span> (<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">psi</span>]) = <span class="id" title="var">true</span>)<br/>
∧ (<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">phi</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">dbi1</span> (<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi2</span> ↦ <span class="id" title="var">psi</span>]) = <span class="id" title="var">true</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Private_wfp_bsvar_subst</span> (<span class="id" title="var">phi</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) :<br/>
<span class="id" title="var">well_formed_positive</span> <span class="id" title="var">psi</span> →<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi</span> 0 →<br/>
<span class="id" title="var">well_formed_positive</span> <span class="id" title="var">phi</span> →<br/>
(<br/>
&nbsp;&nbsp;<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">n</span> <span class="id" title="var">phi</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_positive</span> (<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi</span>]) )<br/>
∧ (<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">n</span> <span class="id" title="var">phi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">phi'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_positive</span> <span class="id" title="var">phi'</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_positive</span> (<span class="id" title="var">patt_imp</span> (<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">psi</span>]) <span class="id" title="var">phi'</span>)<br/>
&nbsp;&nbsp;&nbsp;)<br/>
.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">wfp_bsvar_subst</span> (<span class="id" title="var">phi</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) :<br/>
<span class="id" title="var">well_formed_positive</span> (<span class="id" title="var">patt_mu</span> <span class="id" title="var">phi</span>) →<br/>
<span class="id" title="var">well_formed_positive</span> <span class="id" title="var">psi</span> →<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">psi</span> 0 →<br/>
<span class="id" title="var">well_formed_positive</span> (<span class="id" title="var">phi</span>^[<span class="id" title="var">svar</span>: 0 ↦ <span class="id" title="var">psi</span>]).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bevar_subst_evar_quantify_free_evar</span> <span class="id" title="var">x</span> <span class="id" title="var">dbi</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">dbi</span> →<br/>
&nbsp;&nbsp;(<span class="id" title="var">ϕ</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">dbi</span>}})^[<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span>] = <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bsvar_subst_svar_quantify_free_svar</span> <span class="id" title="var">X</span> <span class="id" title="var">dbi</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">dbi</span> →<br/>
&nbsp;&nbsp;(<span class="id" title="var">ϕ</span>^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">dbi</span>}})^[<span class="id" title="var">svar</span>: <span class="id" title="var">dbi</span> ↦ (<span class="id" title="var">patt_free_svar</span> <span class="id" title="var">X</span>)]  = <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_svar_subst_fresh</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">X</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">svar_is_fresh_in</span> <span class="id" title="var">X</span> <span class="id" title="var">phi</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">phi</span>^[[<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">psi</span>]] = <span class="id" title="var">phi</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_mu_free_svar_subst</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">X</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="keyword">level</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> ψ <span class="id" title="keyword">level</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">ϕ</span>^[[<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ ψ]]) <span class="id" title="keyword">level</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_ex_free_svar_subst</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">X</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="keyword">level</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> ψ <span class="id" title="keyword">level</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">ϕ</span>^[[<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ ψ]]) <span class="id" title="keyword">level</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_ex_free_evar_subst_2</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">x</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="keyword">level</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> ψ <span class="id" title="keyword">level</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">ϕ</span>^[[<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ ψ]]) <span class="id" title="keyword">level</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_mu_free_evar_subst</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">x</span>:<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="keyword">level</span> →<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> ψ <span class="id" title="keyword">level</span> →<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">ϕ</span>^[[<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ ψ]]) <span class="id" title="keyword">level</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wf_evar_open_from_wf_ex</span> <span class="id" title="var">x</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed</span> (<span class="id" title="var">patt_exists</span> <span class="id" title="var">ϕ</span>) →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed</span> (<span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: 0 ↦ <span class="id" title="var">x</span>}).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">evar_open_size'</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">k</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">n</span> : <span class="id" title="tactic">evar</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">Pattern</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">size'</span> (<span class="id" title="var">p</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">k</span> ↦ <span class="id" title="var">n</span>}) = <span class="id" title="var">size'</span> <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">svar_open_size'</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">k</span> : <span class="id" title="var">db_index</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">svar</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">Pattern</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">size'</span> (<span class="id" title="var">p</span>^{<span class="id" title="var">svar</span>: <span class="id" title="var">k</span> ↦ <span class="id" title="var">n</span>}) = <span class="id" title="var">size'</span> <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">bcmcloseex</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">l</span> : <span class="id" title="var">list</span> (<span class="id" title="var">prod</span> <span class="id" title="var">db_index</span> <span class="id" title="tactic">evar</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ϕ</span> : <span class="id" title="var">Pattern</span>) : <span class="id" title="var">Pattern</span><br/>
:= <span class="id" title="var">fold_left</span> (<span class="id" title="var">λ</span> <span class="id" title="var">ϕ'</span> <span class="id" title="var">p</span>, <span class="id" title="var">ϕ'</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">p</span>.1 ↦ <span class="id" title="var">p</span>.2}) <span class="id" title="var">l</span> <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bcmcloseex_append</span> (<span class="id" title="var">l₁</span> <span class="id" title="var">l₂</span> : <span class="id" title="var">list</span> (<span class="id" title="var">prod</span> <span class="id" title="var">db_index</span> <span class="id" title="tactic">evar</span>)) (<span class="id" title="var">ϕ</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">bcmcloseex</span> (<span class="id" title="var">l₁</span> ++ <span class="id" title="var">l₂</span>) <span class="id" title="var">ϕ</span> = <span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l₂</span> (<span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l₁</span> <span class="id" title="var">ϕ</span>).<br/>

<br/>
<span class="comment">(*<br/>
Lemma&nbsp;bmcloseex_wfcex<br/>
&nbsp;&nbsp;{Σ&nbsp;:&nbsp;Signature}<br/>
&nbsp;&nbsp;(l&nbsp;:&nbsp;list&nbsp;(prod&nbsp;db_index&nbsp;evar))<br/>
&nbsp;&nbsp;(ϕ&nbsp;:&nbsp;Pattern)<br/>
&nbsp;&nbsp;:&nbsp;well_formed_closed_ex_aux&nbsp;ϕ&nbsp;from&nbsp;-&gt;<br/>
&nbsp;&nbsp;(bcmcloseex&nbsp;from&nbsp;l&nbsp;ϕ)&nbsp;=&nbsp;ϕ.<br/>
Proof.<br/>
&nbsp;&nbsp;intros&nbsp;H.<br/>
&nbsp;&nbsp;induction&nbsp;l.<br/>
&nbsp;&nbsp;{&nbsp;reflexivity.&nbsp;}<br/>
&nbsp;&nbsp;{&nbsp;simpl.&nbsp;rewrite&nbsp;IHl.&nbsp;by&nbsp;rewrite&nbsp;evar_open_not_occur.&nbsp;}<br/>
Qed.<br/>
*)</span><br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bcmcloseex_bott</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">l</span> : <span class="id" title="var">list</span> (<span class="id" title="var">prod</span> <span class="id" title="var">db_index</span> <span class="id" title="tactic">evar</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> <span class="id" title="var">patt_bott</span> = <span class="id" title="var">patt_bott</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bcmcloseex_sym</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">l</span> : <span class="id" title="var">list</span> (<span class="id" title="var">prod</span> <span class="id" title="var">db_index</span> <span class="id" title="tactic">evar</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="var">symbols</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> (<span class="id" title="var">patt_sym</span> <span class="id" title="var">s</span>) = (<span class="id" title="var">patt_sym</span> <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bcmcloseex_imp</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">l</span> : <span class="id" title="var">list</span> (<span class="id" title="var">prod</span> <span class="id" title="var">db_index</span> <span class="id" title="tactic">evar</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">Pattern</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> (<span class="id" title="var">patt_imp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) = <span class="id" title="var">patt_imp</span> (<span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> <span class="id" title="var">p</span>) (<span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bcmcloseex_app</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">l</span> : <span class="id" title="var">list</span> (<span class="id" title="var">prod</span> <span class="id" title="var">db_index</span> <span class="id" title="tactic">evar</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">Pattern</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> (<span class="id" title="var">patt_app</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) = <span class="id" title="var">patt_app</span> (<span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> <span class="id" title="var">p</span>) (<span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bcmcloseex_ex</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">l</span> : <span class="id" title="var">list</span> (<span class="id" title="var">prod</span> <span class="id" title="var">db_index</span> <span class="id" title="tactic">evar</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">q</span> : <span class="id" title="var">Pattern</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> (<span class="id" title="var">patt_exists</span> <span class="id" title="var">q</span>) = <span class="id" title="var">patt_exists</span> (<span class="id" title="var">bcmcloseex</span> (<span class="id" title="var">map</span> (<span class="id" title="var">λ</span> <span class="id" title="var">p</span>, (<span class="id" title="var">S</span> <span class="id" title="var">p</span>.1,<span class="id" title="var">p</span>.2)) <span class="id" title="var">l</span>) <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bcmcloseex_mu</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">l</span> : <span class="id" title="var">list</span> (<span class="id" title="var">prod</span> <span class="id" title="var">db_index</span> <span class="id" title="tactic">evar</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">q</span> : <span class="id" title="var">Pattern</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> (<span class="id" title="var">patt_mu</span> <span class="id" title="var">q</span>) = <span class="id" title="var">patt_mu</span> (<span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_ex_aux_S_bevar_subst_fe</span> <span class="id" title="var">k</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">x</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">ϕ</span>^[<span class="id" title="tactic">evar</span>:<span class="id" title="var">k</span>↦<span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span>] <span class="id" title="var">k</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">S</span> <span class="id" title="var">k</span>) = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_ex_aux_evar_open_gt</span> <span class="id" title="var">dbi</span> <span class="id" title="var">x</span> <span class="id" title="var">k</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">k</span> &gt; <span class="id" title="var">dbi</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">x</span>}) <span class="id" title="var">k</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">S</span> <span class="id" title="var">k</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_ex_aux_evar_open_lt</span> <span class="id" title="var">dbi</span> <span class="id" title="var">x</span> <span class="id" title="var">k</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">k</span> &lt; <span class="id" title="var">dbi</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">dbi</span> ↦ <span class="id" title="var">x</span>}) <span class="id" title="var">k</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">S</span> <span class="id" title="var">dbi</span>) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">evar_open_twice_not_occur</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">bevar_occur</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">n</span> = <span class="id" title="var">false</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">y</span>} = <span class="id" title="var">ϕ</span>^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">S</span> <span class="id" title="var">n</span> ↦ <span class="id" title="var">y</span>}^{<span class="id" title="tactic">evar</span>: <span class="id" title="var">n</span> ↦ <span class="id" title="var">x</span>}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfc_ex_aux_bcmcloseex</span> <span class="id" title="var">l</span> <span class="id" title="var">k</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">Forall</span> (<span class="id" title="var">λ</span> <span class="id" title="var">p</span> : <span class="id" title="var">nat</span> × <span class="id" title="tactic">evar</span>, <span class="id" title="var">p</span>.1 ≤ <span class="id" title="var">k</span>) <span class="id" title="var">l</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">bcmcloseex</span> <span class="id" title="var">l</span> (<span class="id" title="var">patt_exists</span> <span class="id" title="var">ϕ</span>)) <span class="id" title="var">k</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">bcmcloseex</span> (<span class="id" title="var">map</span> (<span class="id" title="var">λ</span> <span class="id" title="var">p</span> : <span class="id" title="var">nat</span> × <span class="id" title="tactic">evar</span>, (<span class="id" title="var">S</span> <span class="id" title="var">p</span>.1, <span class="id" title="var">p</span>.2)) <span class="id" title="var">l</span>) <span class="id" title="var">ϕ</span>) (<span class="id" title="var">S</span> <span class="id" title="var">k</span>) = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_svars_free_evar_subst</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">x</span> ψ:<br/>
&nbsp;&nbsp;<span class="id" title="var">free_svars</span> (<span class="id" title="var">ϕ</span>^[[<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ ψ]]) ⊆ <span class="id" title="var">free_svars</span> <span class="id" title="var">ϕ</span> ∪ <span class="id" title="var">free_svars</span> ψ.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_neg_occ_quan_impl_no_neg_occ</span> <span class="id" title="var">x</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">ϕ</span>:<br/>
<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">n1</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n2</span>}}) = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">n1</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">true</span><br/>
<span class="id" title="keyword">with</span> <span class="id" title="var">no_pos_occ_quan_impl_no_pos_occ</span> <span class="id" title="var">x</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">ϕ</span>:<br/>
<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">n1</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n2</span>}}) = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">n1</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfp_evar_quan_impl_wfp</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;<span class="id" title="var">well_formed_positive</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}) = <span class="id" title="var">true</span> →<br/>
&nbsp;<span class="id" title="var">well_formed_positive</span> <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfp_evar_quan</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;<span class="id" title="var">well_formed_positive</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}) = <span class="id" title="var">well_formed_positive</span> <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfcmu_evar_quan_impl_wfcmu</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> <span class="id" title="var">dbi</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}) <span class="id" title="var">dbi</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">dbi</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfcmu_evar_quan</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> <span class="id" title="var">dbi</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_mu_aux</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}) <span class="id" title="var">dbi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">well_formed_closed_mu_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">dbi</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfcex_evar_quan_impl_wfcex</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> <span class="id" title="var">dbi</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">n</span>}}) <span class="id" title="var">dbi</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">dbi</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nno_free_svar_subst</span> <span class="id" title="var">dbi</span> <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">X</span>:<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> ψ <span class="id" title="var">dbi</span> →<br/>
<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">dbi</span> (<span class="id" title="var">ϕ</span>^[[<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ ψ]])<br/>
= <span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">dbi</span> <span class="id" title="var">ϕ</span><br/>
<span class="id" title="keyword">with</span> <span class="id" title="var">npo_free_svar_subst</span> <span class="id" title="var">dbi</span> <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">X</span>:<br/>
<span class="id" title="var">well_formed_closed_mu_aux</span> ψ <span class="id" title="var">dbi</span> →<br/>
<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">dbi</span> (<span class="id" title="var">ϕ</span>^[[<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ ψ]])<br/>
= <span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">dbi</span> <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wfp_free_svar_subst_1</span> <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">X</span>:<br/>
<span class="id" title="var">well_formed_closed</span> ψ = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">well_formed_positive</span> ψ = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">well_formed_positive</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">true</span> →<br/>
<span class="id" title="var">well_formed_positive</span> (<span class="id" title="var">ϕ</span>^[[<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ ψ]]) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Private_no_negative_occurrence_svar_quantify</span> <span class="id" title="var">ϕ</span> <span class="id" title="keyword">level</span> <span class="id" title="var">X</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_negative_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">false</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="keyword">level</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="keyword">level</span>}}) = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;∧<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_positive_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">false</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="keyword">level</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="keyword">level</span>}}) = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_negative_occurrence_svar_quantify</span> <span class="id" title="var">ϕ</span> <span class="id" title="keyword">level</span> <span class="id" title="var">X</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_negative_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">false</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="keyword">level</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="keyword">level</span>}}) = <span class="id" title="var">true</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_positive_occurrence_svar_quantify</span> <span class="id" title="var">ϕ</span> <span class="id" title="keyword">level</span> <span class="id" title="var">X</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="keyword">level</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">svar_has_positive_occurrence</span> <span class="id" title="var">X</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">false</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="keyword">level</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="keyword">level</span>}}) = <span class="id" title="var">true</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_negative_occurrence_svar_quantify_2</span> <span class="id" title="var">X</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dbi1</span> ≠ <span class="id" title="var">dbi2</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">dbi1</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">dbi2</span>}}) = <span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">ϕ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">no_positive_occurrence_svar_quantify_2</span>  <span class="id" title="var">X</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">dbi2</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dbi1</span> ≠ <span class="id" title="var">dbi2</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">dbi1</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">dbi2</span>}}) = <span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">dbi1</span> <span class="id" title="var">ϕ</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">well_formed_positive_svar_quantify</span> <span class="id" title="var">X</span> <span class="id" title="var">dbi</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_positive</span> <span class="id" title="var">ϕ</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_positive</span> (<span class="id" title="var">ϕ</span>^{{<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">dbi</span>}}) = <span class="id" title="var">true</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_evar_subst_free_evar_subst</span> φ ψ <span class="id" title="var">η</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed_closed_ex_aux</span> ψ <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> ∉ <span class="id" title="var">free_evars</span> <span class="id" title="var">η</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;φ^[[<span class="id" title="tactic">evar</span>:<span class="id" title="var">x</span> ↦ ψ]]^[<span class="id" title="tactic">evar</span>:<span class="id" title="var">n</span> ↦ <span class="id" title="var">η</span>] =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;φ^[<span class="id" title="tactic">evar</span>:<span class="id" title="var">n</span> ↦ <span class="id" title="var">η</span>]^[[<span class="id" title="tactic">evar</span>:<span class="id" title="var">x</span> ↦ ψ]].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">subst_svar_evar_svar</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">x</span> ψ <span class="id" title="var">n</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> ∉ <span class="id" title="var">free_evars</span> <span class="id" title="var">ϕ</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ϕ</span>^[<span class="id" title="var">svar</span>:<span class="id" title="var">n</span>↦<span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span>]^[[<span class="id" title="tactic">evar</span>:<span class="id" title="var">x</span>↦ψ]] = <span class="id" title="var">ϕ</span>^[<span class="id" title="var">svar</span>:<span class="id" title="var">n</span>↦ψ].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_neg_svar_subst</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> ∉ <span class="id" title="var">free_evars</span> <span class="id" title="var">ϕ</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_negative_occurrence_db_b</span> <span class="id" title="var">n</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~~<span class="id" title="var">evar_has_negative_occurrence</span> <span class="id" title="var">x</span> <span class="id" title="var">ϕ</span>^[<span class="id" title="var">svar</span>:<span class="id" title="var">n</span>↦<span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_pos_svar_subst</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> ∉ <span class="id" title="var">free_evars</span> <span class="id" title="var">ϕ</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">no_positive_occurrence_db_b</span> <span class="id" title="var">n</span> <span class="id" title="var">ϕ</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~~<span class="id" title="var">evar_has_positive_occurrence</span> <span class="id" title="var">x</span> <span class="id" title="var">ϕ</span>^[<span class="id" title="var">svar</span>:<span class="id" title="var">n</span>↦<span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">mu_free_evar_quantify</span>: <br/>
&nbsp;&nbsp;&nbsp;&nbsp;∀ {<span class="id" title="var">Σ</span> : <span class="id" title="var">Signature</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">db_index</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">mu_free</span> <span class="id" title="var">p</span> = <span class="id" title="var">mu_free</span> (<span class="id" title="var">p</span>^{{<span class="id" title="tactic">evar</span>:<span class="id" title="var">x</span>↦<span class="id" title="var">n</span>}}).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_evar_subst_id</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> φ <span class="id" title="var">x</span>, φ^[[<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span>]] = φ.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">free_evar_subst_chain</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> φ <span class="id" title="var">x</span> <span class="id" title="var">y</span> ψ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">y</span> ∉ <span class="id" title="var">free_evars</span> φ →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;φ^[[<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ <span class="id" title="var">patt_free_evar</span> <span class="id" title="var">y</span>]]^[[<span class="id" title="tactic">evar</span>:<span class="id" title="var">y</span> ↦ ψ]] =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;φ^[[<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ ψ]].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">patt_free_evar_subst</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> φ, (<span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span>)^[[<span class="id" title="tactic">evar</span>: <span class="id" title="var">x</span> ↦ φ]] = φ.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mu_free_free_evar_subst</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> φ ψ <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">mu_free</span> φ → <span class="id" title="var">mu_free</span> ψ →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">mu_free</span> (<span class="id" title="var">free_evar_subst</span> ψ <span class="id" title="var">x</span> φ).<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="tactic">subst</span>.<br/>

<br/>
<span class="comment">(*<br/>
[export]
 Hint Resolve wfc_mu_free_svar_subst : core.
<span class="inlinecode"><span class="id" title="var">export</span></span><br/>
&nbsp;Hint&nbsp;Resolve&nbsp;wfc_mu_free_svar_subst&nbsp;:&nbsp;core.<br/>
[export]
 Hint Resolve wfc_ex_free_evar_subst_2 : core.
*)</span><br/>
</div>
<hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>