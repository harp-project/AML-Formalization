<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>ProofSystem</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">File ProofSystem</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ssreflect</span> <span class="id" title="var">ssrfun</span> <span class="id" title="var">ssrbool</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Logic.Classical_Prop</span> <span class="id" title="var">Logic.Eqdep_dec</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MatchingLogic.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">stdpp_ext</span> <span class="id" title="var">Lattice</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MatchingLogic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="keyword">Syntax</span> <span class="id" title="var">NamedAxioms</span> <span class="id" title="var">DerivedOperators_Syntax</span> <span class="id" title="var">monotonic</span> <span class="id" title="var">wftactics</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">base</span> <span class="id" title="var">fin_sets</span> <span class="id" title="var">sets</span> <span class="id" title="var">propset</span> <span class="id" title="var">gmap</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MatchingLogic.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">extralibrary</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">MatchingLogic.Syntax.Notations</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">MatchingLogic.Substitution.Notations</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">MatchingLogic.DerivedOperators_Syntax.Notations</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">ml_proof_system</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ml_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">Σ</span> : <span class="id" title="var">Signature</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Proof&nbsp;system&nbsp;for&nbsp;AML&nbsp;ref.&nbsp;snapshot:&nbsp;Section&nbsp;3&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Reserved Notation</span> &quot;theory ⊢r pattern" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 76).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <span class="id" title="var">ML_proof_system</span> (<span class="id" title="var">theory</span> : <span class="id" title="var">Theory</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Pattern</span> → <span class="id" title="keyword">Set</span> :=<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Hypothesis&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">hypothesis</span> (<span class="id" title="var">axiom</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">axiom</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">axiom</span> ∈ <span class="id" title="var">theory</span>) → <span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">axiom</span><br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FOL&nbsp;reasoning&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Propositional&nbsp;tautology&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">P1</span> (<span class="id" title="var">phi</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">phi</span> → <span class="id" title="var">well_formed</span> <span class="id" title="var">psi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="var">phi</span> ---&gt; (<span class="id" title="var">psi</span> ---&gt; <span class="id" title="var">phi</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">P2</span> (<span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">xi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">phi</span> → <span class="id" title="var">well_formed</span> <span class="id" title="var">psi</span> → <span class="id" title="var">well_formed</span> <span class="id" title="var">xi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> ((<span class="id" title="var">phi</span> ---&gt; (<span class="id" title="var">psi</span> ---&gt; <span class="id" title="var">xi</span>)) ---&gt; ((<span class="id" title="var">phi</span> ---&gt; <span class="id" title="var">psi</span>) ---&gt; (<span class="id" title="var">phi</span> ---&gt; <span class="id" title="var">xi</span>)))<br/>
&nbsp;&nbsp;| <span class="id" title="var">P3</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">phi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (((<span class="id" title="var">phi</span> ---&gt; <span class="id" title="var">Bot</span>) ---&gt; <span class="id" title="var">Bot</span>) ---&gt; <span class="id" title="var">phi</span>)<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Modus&nbsp;ponens&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Modus_ponens</span> (<span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">phi1</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="var">phi1</span> ---&gt; <span class="id" title="var">phi2</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">phi2</span><br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Existential&nbsp;quantifier&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Ex_quan</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">y</span> : <span class="id" title="tactic">evar</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> (<span class="id" title="var">patt_exists</span> <span class="id" title="var">phi</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="tactic">instantiate</span> (<span class="id" title="var">patt_exists</span> <span class="id" title="var">phi</span>) (<span class="id" title="var">patt_free_evar</span> <span class="id" title="var">y</span>) ---&gt; (<span class="id" title="var">patt_exists</span> <span class="id" title="var">phi</span>))<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Existential&nbsp;generalization&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Ex_gen</span> (<span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">phi1</span> → <span class="id" title="var">well_formed</span> <span class="id" title="var">phi2</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="var">phi1</span> ---&gt; <span class="id" title="var">phi2</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> ∉ (<span class="id" title="var">free_evars</span> <span class="id" title="var">phi2</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="var">exists_quantify</span> <span class="id" title="var">x</span> <span class="id" title="var">phi1</span> ---&gt; <span class="id" title="var">phi2</span>)<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Frame&nbsp;reasoning&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Propagation&nbsp;bottom&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_left</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">phi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="var">patt_bott</span> $ <span class="id" title="var">phi</span> ---&gt; <span class="id" title="var">patt_bott</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_right</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">phi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="var">phi</span> $ <span class="id" title="var">patt_bott</span> ---&gt; <span class="id" title="var">patt_bott</span>)<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Propagation&nbsp;disjunction&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_left</span> (<span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">phi1</span> → <span class="id" title="var">well_formed</span> <span class="id" title="var">phi2</span> → <span class="id" title="var">well_formed</span> <span class="id" title="var">psi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (((<span class="id" title="var">phi1</span> <span class="id" title="var">or</span> <span class="id" title="var">phi2</span>) $ <span class="id" title="var">psi</span>) ---&gt; ((<span class="id" title="var">phi1</span> $ <span class="id" title="var">psi</span>) <span class="id" title="var">or</span> (<span class="id" title="var">phi2</span> $ <span class="id" title="var">psi</span>)))<br/>
<br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_right</span> (<span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">phi1</span> → <span class="id" title="var">well_formed</span> <span class="id" title="var">phi2</span> → <span class="id" title="var">well_formed</span> <span class="id" title="var">psi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> ((<span class="id" title="var">psi</span> $ (<span class="id" title="var">phi1</span> <span class="id" title="var">or</span> <span class="id" title="var">phi2</span>)) ---&gt; ((<span class="id" title="var">psi</span> $ <span class="id" title="var">phi1</span>) <span class="id" title="var">or</span> (<span class="id" title="var">psi</span> $ <span class="id" title="var">phi2</span>)))<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Propagation&nbsp;exist&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_left</span> (<span class="id" title="var">phi</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> (<span class="id" title="var">ex</span> , <span class="id" title="var">phi</span>) → <span class="id" title="var">well_formed</span> <span class="id" title="var">psi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (((<span class="id" title="var">ex</span> , <span class="id" title="var">phi</span>) $ <span class="id" title="var">psi</span>) ---&gt; (<span class="id" title="var">ex</span> , <span class="id" title="var">phi</span> $ <span class="id" title="var">psi</span>))<br/>
<br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_right</span> (<span class="id" title="var">phi</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> (<span class="id" title="var">ex</span> , <span class="id" title="var">phi</span>) → <span class="id" title="var">well_formed</span> <span class="id" title="var">psi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> ((<span class="id" title="var">psi</span> $ (<span class="id" title="var">ex</span> , <span class="id" title="var">phi</span>)) ---&gt; (<span class="id" title="var">ex</span> , <span class="id" title="var">psi</span> $ <span class="id" title="var">phi</span>))<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Framing&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Framing_left</span> (<span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">psi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="var">phi1</span> ---&gt; <span class="id" title="var">phi2</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> ((<span class="id" title="var">phi1</span> $ <span class="id" title="var">psi</span>) ---&gt; (<span class="id" title="var">phi2</span> $ <span class="id" title="var">psi</span>))<br/>
<br/>
&nbsp;&nbsp;| <span class="id" title="var">Framing_right</span> (<span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">psi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="var">phi1</span> ---&gt; <span class="id" title="var">phi2</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> ((<span class="id" title="var">psi</span> $ <span class="id" title="var">phi1</span>) ---&gt; (<span class="id" title="var">psi</span> $ <span class="id" title="var">phi2</span>))<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Fixpoint&nbsp;reasoning&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Set&nbsp;Variable&nbsp;Substitution&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Svar_subst</span> (<span class="id" title="var">phi</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">phi</span> → <span class="id" title="var">well_formed</span> <span class="id" title="var">psi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">phi</span> → <span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="var">phi</span>^[[<span class="id" title="var">svar</span>: <span class="id" title="var">X</span> ↦ <span class="id" title="var">psi</span>]])<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Pre-Fixpoint&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Pre_fixp</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> (<span class="id" title="var">patt_mu</span> <span class="id" title="var">phi</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="tactic">instantiate</span> (<span class="id" title="var">patt_mu</span> <span class="id" title="var">phi</span>) (<span class="id" title="var">patt_mu</span> <span class="id" title="var">phi</span>) ---&gt; (<span class="id" title="var">patt_mu</span> <span class="id" title="var">phi</span>))<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Knaster-Tarski&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Knaster_tarski</span> (<span class="id" title="var">phi</span> <span class="id" title="var">psi</span> : <span class="id" title="var">Pattern</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> (<span class="id" title="var">patt_mu</span> <span class="id" title="var">phi</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> ((<span class="id" title="tactic">instantiate</span> (<span class="id" title="var">patt_mu</span> <span class="id" title="var">phi</span>) <span class="id" title="var">psi</span>) ---&gt; <span class="id" title="var">psi</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> ((@<span class="id" title="var">patt_mu</span> <span class="id" title="var">Σ</span> <span class="id" title="var">phi</span>) ---&gt; <span class="id" title="var">psi</span>)<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Technical&nbsp;rules&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Existence&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Existence</span> : <span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (<span class="id" title="var">ex</span> , <span class="id" title="var">patt_bound_evar</span> 0)<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Singleton&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Singleton_ctx</span> (<span class="id" title="var">C1</span> <span class="id" title="var">C2</span> : <span class="id" title="var">Application_context</span>) (<span class="id" title="var">phi</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">well_formed</span> <span class="id" title="var">phi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">theory</span> ⊢<span class="id" title="var">r</span> (! ((<span class="id" title="var">subst_ctx</span> <span class="id" title="var">C1</span> (<span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span> <span class="id" title="var">and</span> <span class="id" title="var">phi</span>)) <span class="id" title="var">and</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">subst_ctx</span> <span class="id" title="var">C2</span> (<span class="id" title="var">patt_free_evar</span> <span class="id" title="var">x</span> <span class="id" title="var">and</span> (! <span class="id" title="var">phi</span>)))))<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">where</span> &quot;theory ⊢r pattern" := (<span class="id" title="var">ML_proof_system</span> <span class="id" title="var">theory</span> <span class="id" title="tactic">pattern</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <span class="id" title="var">ML_proof_system_eqdec</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">gamma</span> <span class="id" title="var">phi</span>, <span class="id" title="var">EqDecision</span> (<span class="id" title="var">ML_proof_system</span> <span class="id" title="var">gamma</span> <span class="id" title="var">phi</span>).<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">proved_impl_wf</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span> → <span class="id" title="var">well_formed</span> <span class="id" title="var">ϕ</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">cast_proof</span> {<span class="id" title="var">Γ</span>} {<span class="id" title="var">ϕ</span>} {ψ} (<span class="id" title="var">e</span> : ψ = <span class="id" title="var">ϕ</span>) : <span class="id" title="var">ML_proof_system</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> → <span class="id" title="var">ML_proof_system</span> <span class="id" title="var">Γ</span> ψ.<br/>
 
<br/>
<span class="comment">(*&nbsp;TODO&nbsp;make&nbsp;this&nbsp;return&nbsp;well-formed&nbsp;patterns.&nbsp;*)</span><br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">framing_patterns</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span>) : <span class="id" title="var">gset</span> <span class="id" title="var">wfPattern</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">pf</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">hypothesis</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">P1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">P2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">P3</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">Modus_ponens</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;⇒ (@<span class="id" title="var">framing_patterns</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span>) ∪ (@<span class="id" title="var">framing_patterns</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m1</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Ex_quan</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">Ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf</span> <span class="id" title="var">_</span> ⇒ @<span class="id" title="var">framing_patterns</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">Framing_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">psi</span> <span class="id" title="var">wfp</span> <span class="id" title="var">m0</span> ⇒ {[(<span class="id" title="var">exist</span> <span class="id" title="var">_</span> <span class="id" title="var">psi</span> <span class="id" title="var">wfp</span>)]} ∪ (@<span class="id" title="var">framing_patterns</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Framing_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">psi</span> <span class="id" title="var">wfp</span> <span class="id" title="var">m0</span> ⇒ {[(<span class="id" title="var">exist</span> <span class="id" title="var">_</span> <span class="id" title="var">psi</span> <span class="id" title="var">wfp</span>)]} ∪ (@<span class="id" title="var">framing_patterns</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ @<span class="id" title="var">framing_patterns</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Pre_fixp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">Knaster_tarski</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">m0</span> ⇒ @<span class="id" title="var">framing_patterns</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Existence</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;| <span class="id" title="var">Singleton_ctx</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">uses_ex_gen</span> (<span class="id" title="var">EvS</span> : <span class="id" title="var">EVarSet</span>) <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">ML_proof_system</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">pf</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hypothesis</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P3</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Modus_ponens</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="var">uses_ex_gen</span> <span class="id" title="var">EvS</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="var">uses_ex_gen</span> <span class="id" title="var">EvS</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_quan</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">if</span> <span class="id" title="var">decide</span> (<span class="id" title="var">x</span> ∈ <span class="id" title="var">EvS</span>) <span class="id" title="keyword">is</span> <span class="id" title="tactic">left</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">true</span> <span class="id" title="keyword">else</span> <span class="id" title="var">uses_ex_gen</span> <span class="id" title="var">EvS</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_ex_gen</span> <span class="id" title="var">EvS</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_ex_gen</span> <span class="id" title="var">EvS</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_ex_gen</span> <span class="id" title="var">EvS</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Pre_fixp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Knaster_tarski</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_ex_gen</span> <span class="id" title="var">EvS</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Existence</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Singleton_ctx</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">uses_of_ex_gen</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">ML_proof_system</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span>) : <span class="id" title="var">EVarSet</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">pf</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hypothesis</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P3</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Modus_ponens</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="var">uses_of_ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∪ <span class="id" title="var">uses_of_ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_quan</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf</span> <span class="id" title="var">_</span> ⇒ {[<span class="id" title="var">x</span>]} ∪ <span class="id" title="var">uses_of_ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_of_ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_of_ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_of_ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Pre_fixp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Knaster_tarski</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_of_ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Existence</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Singleton_ctx</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">uses_of_ex_gen_correct</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">ML_proof_system</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span>) (<span class="id" title="var">x</span> : <span class="id" title="tactic">evar</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> ∈ <span class="id" title="var">uses_of_ex_gen</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> ↔ <span class="id" title="var">uses_ex_gen</span> {[<span class="id" title="var">x</span>]} <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = <span class="id" title="var">true</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">uses_svar_subst</span> (<span class="id" title="var">S</span> : <span class="id" title="var">SVarSet</span>) <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">pf</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hypothesis</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P3</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Modus_ponens</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="var">uses_svar_subst</span> <span class="id" title="var">S</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="var">uses_svar_subst</span> <span class="id" title="var">S</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_quan</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf'</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">uses_svar_subst</span> <span class="id" title="var">S</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_svar_subst</span> <span class="id" title="var">S</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_svar_subst</span> <span class="id" title="var">S</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="keyword">if</span> <span class="id" title="var">decide</span> (<span class="id" title="var">X</span> ∈ <span class="id" title="var">S</span>) <span class="id" title="keyword">is</span> <span class="id" title="tactic">left</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">true</span> <span class="id" title="keyword">else</span> <span class="id" title="var">uses_svar_subst</span> <span class="id" title="var">S</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Pre_fixp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Knaster_tarski</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_svar_subst</span> <span class="id" title="var">S</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Existence</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Singleton_ctx</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">uses_of_svar_subst</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span>) : <span class="id" title="var">SVarSet</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">pf</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hypothesis</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P3</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Modus_ponens</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="var">uses_of_svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∪ <span class="id" title="var">uses_of_svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_quan</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf'</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">uses_of_svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_of_svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_of_svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ {[<span class="id" title="var">X</span>]} ∪ <span class="id" title="var">uses_of_svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Pre_fixp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Knaster_tarski</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_of_svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Existence</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Singleton_ctx</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ ∅<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">uses_of_svar_subst_correct</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">ML_proof_system</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span>) (<span class="id" title="var">X</span> : <span class="id" title="var">svar</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">X</span> ∈ <span class="id" title="var">uses_of_svar_subst</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> ↔ <span class="id" title="var">uses_svar_subst</span> {[<span class="id" title="var">X</span>]} <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = <span class="id" title="var">true</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">uses_kt</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">pf</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hypothesis</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P3</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Modus_ponens</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="var">uses_kt</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> || <span class="id" title="var">uses_kt</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_quan</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf'</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">uses_kt</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_kt</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_kt</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">uses_kt</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Pre_fixp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Knaster_tarski</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Existence</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Singleton_ctx</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">propositional_only</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">pf</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hypothesis</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">P3</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Modus_ponens</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="var">propositional_only</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> &amp;&amp; <span class="id" title="var">propositional_only</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_quan</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Ex_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf'</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_bott_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_disj_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Prop_ex_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_left</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Framing_right</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Svar_subst</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Pre_fixp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Knaster_tarski</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">m0</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Existence</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Singleton_ctx</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">propositional_implies_no_frame</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">propositional_only</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = <span class="id" title="var">true</span> → <span class="id" title="var">framing_patterns</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = ∅.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">propositional_implies_noKT</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">propositional_only</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = <span class="id" title="var">true</span> → <span class="id" title="var">uses_kt</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">propositional_implies_no_uses_svar</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">ML_proof_system</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span>) (<span class="id" title="var">SvS</span> : <span class="id" title="var">SVarSet</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">propositional_only</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = <span class="id" title="var">true</span> → <span class="id" title="var">uses_svar_subst</span> <span class="id" title="var">SvS</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">propositional_implies_no_uses_ex_gen</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">ML_proof_system</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span>) (<span class="id" title="var">EvS</span> : <span class="id" title="var">EVarSet</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">propositional_only</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = <span class="id" title="var">true</span> → <span class="id" title="var">uses_ex_gen</span> <span class="id" title="var">EvS</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">propositional_implies_no_uses_ex_gen_2</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">ML_proof_system</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">propositional_only</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = <span class="id" title="var">true</span> → <span class="id" title="var">uses_of_ex_gen</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = ∅.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">propositional_implies_no_uses_svar_2</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> (<span class="id" title="var">pf</span> : <span class="id" title="var">ML_proof_system</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span>)  :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">propositional_only</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = <span class="id" title="var">true</span> → <span class="id" title="var">uses_of_svar_subst</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> = ∅.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">framing_patterns_cast_proof</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> ψ (<span class="id" title="var">pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span>) (<span class="id" title="var">e</span> : ψ = <span class="id" title="var">ϕ</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">framing_patterns</span> <span class="id" title="var">Γ</span> ψ (<span class="id" title="var">cast_proof</span> <span class="id" title="var">e</span> <span class="id" title="var">pf</span>) = @<span class="id" title="var">framing_patterns</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">proofbpred</span> := <span class="id" title="keyword">∀</span> (<span class="id" title="var">Γ</span> : <span class="id" title="var">Theory</span>) (<span class="id" title="var">ϕ</span> : <span class="id" title="var">Pattern</span>),  <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span> → <span class="id" title="var">bool</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">indifferent_to_cast</span> (<span class="id" title="var">P</span> : <span class="id" title="var">proofbpred</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">∀</span> (<span class="id" title="var">Γ</span> : <span class="id" title="var">Theory</span>) (<span class="id" title="var">ϕ</span> ψ : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">e</span>: ψ = <span class="id" title="var">ϕ</span>) (<span class="id" title="var">pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> <span class="id" title="var">Γ</span> ψ (<span class="id" title="var">cast_proof</span> <span class="id" title="var">e</span> <span class="id" title="var">pf</span>) = <span class="id" title="var">P</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">indifferent_to_cast_uses_svar_subst</span> <span class="id" title="var">SvS</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">indifferent_to_cast</span> (<span class="id" title="var">uses_svar_subst</span> <span class="id" title="var">SvS</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">indifferent_to_cast_uses_kt</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">indifferent_to_cast</span> <span class="id" title="var">uses_kt</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">indifferent_to_cast_uses_ex_gen</span> <span class="id" title="var">EvS</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">indifferent_to_cast</span> (<span class="id" title="var">uses_ex_gen</span> <span class="id" title="var">EvS</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">indifferent_to_cast_propositional_only</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">indifferent_to_cast</span> <span class="id" title="var">propositional_only</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">indifferent_to_prop</span> (<span class="id" title="var">P</span> : <span class="id" title="var">proofbpred</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">Γ</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">wfphi</span> <span class="id" title="var">wfpsi</span>, <span class="id" title="var">P</span> <span class="id" title="var">Γ</span> <span class="id" title="var">_</span> (<span class="id" title="var">P1</span> <span class="id" title="var">Γ</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">wfphi</span> <span class="id" title="var">wfpsi</span>) = <span class="id" title="var">false</span>)<br/>
&nbsp;&nbsp;&nbsp;∧ (<span class="id" title="keyword">∀</span> <span class="id" title="var">Γ</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">xi</span> <span class="id" title="var">wfphi</span> <span class="id" title="var">wfpsi</span> <span class="id" title="var">wfxi</span>, <span class="id" title="var">P</span> <span class="id" title="var">Γ</span> <span class="id" title="var">_</span> (<span class="id" title="var">P2</span> <span class="id" title="var">Γ</span> <span class="id" title="var">phi</span> <span class="id" title="var">psi</span> <span class="id" title="var">xi</span> <span class="id" title="var">wfphi</span> <span class="id" title="var">wfpsi</span> <span class="id" title="var">wfxi</span>) = <span class="id" title="var">false</span>)<br/>
&nbsp;&nbsp;&nbsp;∧ (<span class="id" title="keyword">∀</span> <span class="id" title="var">Γ</span> <span class="id" title="var">phi</span> <span class="id" title="var">wfphi</span>, <span class="id" title="var">P</span> <span class="id" title="var">Γ</span> <span class="id" title="var">_</span> (<span class="id" title="var">P3</span> <span class="id" title="var">Γ</span> <span class="id" title="var">phi</span> <span class="id" title="var">wfphi</span>) = <span class="id" title="var">false</span>)<br/>
&nbsp;&nbsp;&nbsp;∧ (<span class="id" title="keyword">∀</span> <span class="id" title="var">Γ</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">pf1</span> <span class="id" title="var">pf2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> <span class="id" title="var">Γ</span> <span class="id" title="var">_</span> (<span class="id" title="var">Modus_ponens</span> <span class="id" title="var">Γ</span> <span class="id" title="var">phi1</span> <span class="id" title="var">phi2</span> <span class="id" title="var">pf1</span> <span class="id" title="var">pf2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">P</span> <span class="id" title="var">Γ</span> <span class="id" title="var">_</span> <span class="id" title="var">pf1</span> || <span class="id" title="var">P</span> <span class="id" title="var">Γ</span> <span class="id" title="var">_</span> <span class="id" title="var">pf2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">indifferent_to_prop_uses_svar_subst</span> <span class="id" title="var">SvS</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">indifferent_to_prop</span> (<span class="id" title="var">uses_svar_subst</span> <span class="id" title="var">SvS</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">indifferent_to_prop_uses_kt</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">indifferent_to_prop</span> <span class="id" title="var">uses_kt</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">indifferent_to_prop_uses_ex_gen</span> <span class="id" title="var">EvS</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">indifferent_to_prop</span> (<span class="id" title="var">uses_ex_gen</span> <span class="id" title="var">EvS</span>).<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">ml_proof_system</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">uses_svar_subst</span> {<span class="id" title="var">Σ</span>} <span class="id" title="var">S</span> {<span class="id" title="var">Γ</span>} {<span class="id" title="var">ϕ</span>} <span class="id" title="var">pf</span> : <span class="id" title="tactic">rename</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">uses_kt</span> {<span class="id" title="var">Σ</span>} {<span class="id" title="var">Γ</span>} {<span class="id" title="var">ϕ</span>} <span class="id" title="var">pf</span> : <span class="id" title="tactic">rename</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">uses_ex_gen</span> {<span class="id" title="var">Σ</span>} <span class="id" title="var">E</span> {<span class="id" title="var">Γ</span>} {<span class="id" title="var">ϕ</span>} <span class="id" title="var">pf</span> : <span class="id" title="tactic">rename</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="var">Notations_private</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;theory ⊢r pattern" := (<span class="id" title="var">ML_proof_system</span> <span class="id" title="var">theory</span> <span class="id" title="tactic">pattern</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 95, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Notations_private</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">coGset</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">proof_info</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">Σ</span> : <span class="id" title="var">Signature</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">Notations_private</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">instantiate_named_axiom</span> (<span class="id" title="var">NA</span> : <span class="id" title="var">NamedAxioms</span>) (<span class="id" title="var">name</span> : (<span class="id" title="var">NAName</span> <span class="id" title="var">NA</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">theory_of_NamedAxioms</span> <span class="id" title="var">NA</span>) ⊢<span class="id" title="var">r</span> (@<span class="id" title="var">NAAxiom</span> <span class="id" title="var">Σ</span> <span class="id" title="var">NA</span> <span class="id" title="var">name</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">coEVarSet</span> := <span class="id" title="var">coGset</span> <span class="id" title="tactic">evar</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">coSVarSet</span> := <span class="id" title="var">coGset</span> <span class="id" title="var">svar</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">WfpSet</span> := <span class="id" title="var">gmap.gset</span> <span class="id" title="var">wfPattern</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">coWfpSet</span> := <span class="id" title="var">coGset</span> <span class="id" title="var">wfPattern</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <span class="id" title="var">ProofInfo</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">mkProofInfo</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pi_generalized_evars</span> : <span class="id" title="var">coEVarSet</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pi_substituted_svars</span> : <span class="id" title="var">coSVarSet</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pi_uses_kt</span> : <span class="id" title="var">bool</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pi_framing_patterns</span> : <span class="id" title="var">coWfpSet</span> ; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;proof&nbsp;together&nbsp;with&nbsp;some&nbsp;properties&nbsp;of&nbsp;it.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <span class="id" title="var">ProofInfoMeaning</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ</span> : <span class="id" title="var">Theory</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ϕ</span> : <span class="id" title="var">Pattern</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pwi_pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pi</span> : <span class="id" title="var">ProofInfo</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="var">mkProofInfoMeaning</span><br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pwi_pf_ge</span> : <span class="id" title="var">gset_to_coGset</span> (@<span class="id" title="var">uses_of_ex_gen</span> <span class="id" title="var">Σ</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pwi_pf</span>) ⊆ <span class="id" title="var">pi_generalized_evars</span> <span class="id" title="var">pi</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pwi_pf_svs</span> : <span class="id" title="var">gset_to_coGset</span> (@<span class="id" title="var">uses_of_svar_subst</span> <span class="id" title="var">Σ</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pwi_pf</span>) ⊆ <span class="id" title="var">pi_substituted_svars</span> <span class="id" title="var">pi</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pwi_pf_kt</span> : <span class="id" title="var">implb</span> (@<span class="id" title="var">uses_kt</span> <span class="id" title="var">Σ</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pwi_pf</span>) (<span class="id" title="var">pi_uses_kt</span> <span class="id" title="var">pi</span>) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pwi_pf_fp</span> : <span class="id" title="var">gset_to_coGset</span> (@<span class="id" title="var">framing_patterns</span> <span class="id" title="var">Σ</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pwi_pf</span>) ⊆ (<span class="id" title="var">pi_framing_patterns</span> <span class="id" title="var">pi</span>) ;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <span class="id" title="var">ProofInfoLe</span> (<span class="id" title="var">i₁</span> <span class="id" title="var">i₂</span> : <span class="id" title="var">ProofInfo</span>) :=<br/>
&nbsp;&nbsp;{ <span class="id" title="var">pi_le</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">Γ</span> : <span class="id" title="var">Theory</span>) (<span class="id" title="var">ϕ</span> : <span class="id" title="var">Pattern</span>) (<span class="id" title="var">pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">ProofInfoMeaning</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> <span class="id" title="var">i₁</span> → @<span class="id" title="var">ProofInfoMeaning</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pf</span> <span class="id" title="var">i₂</span> ;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;[global]
  Instance
  *)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pile_refl</span> (<span class="id" title="var">i</span> : <span class="id" title="var">ProofInfo</span>) : <span class="id" title="var">ProofInfoLe</span> <span class="id" title="var">i</span> <span class="id" title="var">i</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;[global]
  Instance
  *)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pile_trans</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i₁</span> <span class="id" title="var">i₂</span> <span class="id" title="var">i₃</span> : <span class="id" title="var">ProofInfo</span>) (<span class="id" title="var">PILE12</span> : <span class="id" title="var">ProofInfoLe</span> <span class="id" title="var">i₁</span> <span class="id" title="var">i₂</span>) (<span class="id" title="var">PILE23</span> : <span class="id" title="var">ProofInfoLe</span> <span class="id" title="var">i₂</span> <span class="id" title="var">i₃</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ProofInfoLe</span> <span class="id" title="var">i₁</span> <span class="id" title="var">i₃</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">BasicReasoning</span> : <span class="id" title="var">ProofInfo</span> := ((@<span class="id" title="var">mkProofInfo</span> ∅ ∅ <span class="id" title="var">false</span> ∅)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">AnyReasoning</span> : <span class="id" title="var">ProofInfo</span> := (@<span class="id" title="var">mkProofInfo</span> ⊤ ⊤ <span class="id" title="var">true</span> ⊤).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">derives_using</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pi</span><br/>
&nbsp;&nbsp;:= ({<span class="id" title="var">pf</span> : <span class="id" title="var">Γ</span> ⊢<span class="id" title="var">r</span> <span class="id" title="var">ϕ</span> | @<span class="id" title="var">ProofInfoMeaning</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pf</span> <span class="id" title="var">pi</span> }).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">derives</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">derives_using</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">AnyReasoning</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">raw_proof_of</span> {<span class="id" title="var">Γ</span>} {<span class="id" title="var">ϕ</span>} {<span class="id" title="var">pi</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">derives_using</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pi</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ML_proof_system</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">pf</span> ⇒ <span class="id" title="var">proj1_sig</span> <span class="id" title="var">pf</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">proof_info</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="var">Notations</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;Γ '⊢i' ϕ 'using' pi"<br/>
:= (<span class="id" title="var">derives_using</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">pi</span>)  (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 95, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;Γ ⊢ ϕ" := (<span class="id" title="var">derives</span> <span class="id" title="var">Γ</span> <span class="id" title="var">ϕ</span>)<br/>
(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 95, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;'ExGen' ':=' evs ',' 'SVSubst' := svs ',' 'KT' := bkt ',' 'FP' := fpl"<br/>
&nbsp;&nbsp;:= (@<span class="id" title="var">mkProofInfo</span> <span class="id" title="var">_</span> <span class="id" title="var">evs</span> <span class="id" title="var">svs</span> <span class="id" title="var">bkt</span> <span class="id" title="var">fpl</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 95, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Notations</span>.<br/>

<br/>
</div>
<hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>